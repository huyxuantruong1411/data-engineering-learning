# üìö Schema chi ti·∫øt c√°c collection trong `manga_raw_data`

## 1. `mangadex_manga`

M·ªôt document t∆∞∆°ng ·ª©ng v·ªõi **m·ªôt manga**.

```json
{
  "_id": "string",
  "id": "string",             // Manga ID (UUID)
  "type": "string",           // "manga"
  "attributes": {
    "title": {
      "en": "string",
      "ja": "string"
    },
    "altTitles": [
      {"en": "string"},
      {"ja": "string"}
    ],
    "description": {
      "en": "string"
    },
    "originalLanguage": "string",           // v√≠ d·ª• "ja"
    "publicationDemographic": "string",     // v√≠ d·ª• "shounen", "seinen"
    "status": "string",                     // v√≠ d·ª• "ongoing", "completed"
    "contentRating": "string",              // safe, suggestive, pornographic
    "year": 2010,                           // c√≥ th·ªÉ l√† float 2010.0
    "createdAt": "2024-05-17T06:40:55Z",
    "updatedAt": "2024-05-18T12:22:10Z"
  },
  "relationships": [
    { "id": "creator_id", "type": "author" },
    { "id": "creator_id", "type": "artist" },
    { "id": "cover_id",   "type": "cover_art" },
    { "id": "tag_id",     "type": "tag" }
  ]
}
```

---

## 2. `mangadex_creators`

M·ªôt document ·ª©ng v·ªõi **m·ªôt t√°c gi·∫£/ho·∫° sƒ©**.

```json
{
  "_id": "string",
  "data": {
    "id": "string",        // Creator ID
    "type": "creator",
    "attributes": {
      "name": "string",
      "biography": {"en": "string"},
      "twitter": "string|null",
      "pixiv": "string|null",
      "naver": "string|null",
      "website": "string|null",
      "youtube": "string|null",
      "weibo": "string|null",
      "tumblr": "string|null",
      "nicoVideo": "string|null",
      "booth": "string|null",
      "fanBox": "string|null",
      "fantia": "string|null",
      "melonBook": "string|null",
      "namicomi": "string|null",
      "skeb": "string|null",
      "createdAt": "2024-01-01T00:00:00Z",
      "updatedAt": "2024-02-01T00:00:00Z",
      "version": 1
    },
    "relationships": []
  },
  "fetched_at": "2025-01-01T00:00:00Z",
  "response": "ok",
  "result": "ok"
}
```

---

## 3. `mangadex_cover_arts`

M·ªôt document ·ª©ng v·ªõi **m·ªôt b√¨a manga (cover art)**.

```json
{
  "_id": "string",
  "data": {
    "id": "string",      // Cover ID
    "type": "cover_art",
    "attributes": {
      "description": "string",
      "volume": "string|null",        // v√≠ d·ª• "1", ho·∫∑c null
      "fileName": "cover.jpg",
      "locale": "ja",
      "createdAt": "2024-01-01T00:00:00Z",
      "updatedAt": "2024-02-01T00:00:00Z",
      "version": 1
    },
    "relationships": [
      { "id": "manga_id", "type": "manga" }
    ]
  },
  "fetched_at": "2025-01-01T00:00:00Z",
  "response": "ok",
  "result": "ok"
}
```

---

## 4. `mangadex_related`

M·ªôt document ·ª©ng v·ªõi **m·ªôt manga v√† danh s√°ch manga li√™n quan**.

```json
{
  "_id": "manga_id",
  "fetched_at": "2025-01-01T00:00:00Z",
  "relationships": [
    {
      "id": "related_manga_id",
      "type": "manga",
      "related": "prequel"    // ho·∫∑c sequel, side_story, spin_off, ...
    }
  ]
}
```

---

## 5. `mangadex_tags`

M·ªôt document ·ª©ng v·ªõi **m·ªôt th·∫ª (tag)**.

```json
{
  "_id": "tag_id",
  "attributes": {
    "name": {"en": "Romance"},
    "description": {},                // th∆∞·ªùng r·ªóng
    "group": "genre",                 // v√≠ d·ª•: "genre", "theme", "format"
    "version": 1
  }
}
```

---

## 6. `mangadex_statistics`

M·ªôt document ·ª©ng v·ªõi **snapshot th·ªëng k√™ c·ªßa manga**.

```json
{
  "_id": "string",
  "mangaId": "manga_id",
  "fetched_at": "2025-01-01T00:00:00Z",
  "snapshotTime": 1736895600.0,       // epoch ho·∫∑c object {"$numberDouble": "NaN"}
  "source": "mangadex",
  "statistics": {
    "follows": 12345,
    "unavailableChaptersCount": 0,
    "rating": {
      "average": 8.5,
      "bayesian": 8.2
    },
    "comments": {
      "threadId": 100,
      "repliesCount": 20
    }
  }
}
```

---

## 7. `mangadex_chapters`

M·ªôt document ·ª©ng v·ªõi **m·ªôt chapter**.

```json
{
  "_id": "string",
  "id": "string",            // Chapter ID
  "type": "chapter",
  "mangaId": "manga_id",     // c√≥ th·ªÉ kh√¥ng c√≥, l·∫•y trong relationships
  "attributes": {
    "volume": "1",
    "chapter": "5",
    "title": "Chapter title",
    "translatedLanguage": "en",
    "publishAt": "2024-01-01T00:00:00Z",
    "readableAt": "2024-01-01T00:00:00Z",
    "createdAt": "2024-01-01T00:00:00Z",
    "updatedAt": "2024-02-01T00:00:00Z",
    "pages": 20,
    "version": 1
  },
  "relationships": [
    { "id": "manga_id", "type": "manga" },
    { "id": "group_id", "type": "scanlation_group" }
  ]
}
```

---

## 8. `mangadex_groups`

M·ªôt document ·ª©ng v·ªõi **m·ªôt nh√≥m d·ªãch (scanlation group)**.

```json
{
  "_id": "string",
  "data": {
    "id": "string",        // Group ID
    "type": "scanlation_group",
    "attributes": {
      "name": "Group Name",
      "altNames": [ {"en": "Alias1"}, {"en": "Alias2"} ],
      "focusedLanguages": ["en", "vi"],
      "official": false,
      "verified": true,
      "inactive": false,
      "website": "https://...",
      "ircServer": "string",
      "ircChannel": "string",
      "discord": "discord.gg/xxx",
      "contactEmail": "mail@example.com",
      "description": "string",
      "createdAt": "2024-01-01T00:00:00Z",
      "updatedAt": "2024-02-01T00:00:00Z",
      "version": 1
    }
  },
  "fetched_at": "2025-01-01T00:00:00Z",
  "response": "ok",
  "result": "ok"
}
```

---

# üóÇÔ∏è T·ªïng quan quan h·ªá gi·ªØa c√°c collection

* **mangadex\_manga**

  * quan h·ªá `author` / `artist` ‚Üí `mangadex_creators`
  * quan h·ªá `cover_art` ‚Üí `mangadex_cover_arts`
  * quan h·ªá `tag` ‚Üí `mangadex_tags`
  * quan h·ªá `manga` trong `mangadex_related`

* **mangadex\_chapters**

  * quan h·ªá `manga` ‚Üí `mangadex_manga`
  * quan h·ªá `scanlation_group` ‚Üí `mangadex_groups`

* **mangadex\_statistics**

  * quan h·ªá `mangaId` ‚Üí `mangadex_manga`

---

üëâ Nh∆∞ v·∫≠y `manga_raw_data` l√† **database g·ªëc d·∫°ng document JSON** v·ªõi 8 collection ch√≠nh, m√¨nh ƒë√£ chu·∫©n ho√° l·∫°i th√†nh c√°c b·∫£ng ‚Äúdimension‚Äù (manga, tags, creators, groups, cover arts) + ‚Äúbridge‚Äù (manga\_tag, manga\_creator, chapter\_group, related) + ‚Äúfact‚Äù (statistics, chapters).
